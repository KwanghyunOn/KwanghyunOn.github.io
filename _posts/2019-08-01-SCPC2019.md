---
title		: "SCPC 2019 본선 후기"
date		: 2019-08-01 15:39:00 +0900
categories	: Competitive-Programming
---

<br>SCPC 2019는 Code Jam 2019에 이은 두 번째 개인 대회였다. 개인 대회를 나가는 게 올해가 처음이라 경험 삼아 보자라는 생각으로 참가신청을 했었는데, 코드잼과 SCPC 2차 예선 결과가 나쁘지 않게 나오면서 근 한 달간은 SCPC 수상을 목표로 열심히 공부했던 것 같다. 긴장을 많이 해서 평소보다 말리기는 했지만 어려운 문제를 하나 풀어내면서 4등상을 수상하게 되었다.

<br>

# Problem set

## 1. 프로그래밍 서클  

Directed graph가 주어졌을 때 bidirected edge가 없는 ($u\rightarrow v$ 와 $v \rightarrow u$ 가 모두 edge인) 점의 개수를 세는 문제이다. Adjacent list를 모두 sorting하고 lower_bound를 썼는데 lower_bound가 list 밖으로 나가는 경우를 고려 안해서 1WA 적립하고 시작했다. 정해는 edge와 그걸 뒤집은 edge까지 총 $2 \lvert E \rvert$ 개의 edge를 sorting하는 것이다.

**6분 AC.**

## 3. 이진탐색트리

2번을 읽어봤는데 휴리스틱 + 기하여서 일단 3번으로 넘어왔다.

Parent와 child가 정해진 이진탐색트리가 초기에 주어진다. 어떤 child가 left고 right인지는 정해져 있지 않다. 그 뒤로 $m\leq10^5$개의 쿼리가 들어오는데, $x$번 노드의 value가 $y$번 노드의 value보다 작다는 것이다. 각 쿼리가 끝날 때마다 가능한 이진탐색트리의 가짓수를 모두 합해서 출력하면 된다.

쿼리 $x<y$ 가 들어온다면 $p=lca(x, y)$ 의 좌우가 고정되어 있는지 확인하면 되는 문제이다. 처음에 불가능한 쿼리(예를 들어 $x<y$ 와 $y<x$ 가 동시에 들어온 경우)를 생각하지 못하고 코드를 짜서 WA를 맞았다. 이후에 코드를 고쳐서 AC를 맞긴 했는데 이런 저런 실수를 계속해서 쉬운 문제임에도 불구하고 3번이나 틀리고 시간을 많이 뺏겼다.

**55분 AC.**

## 2. 단순다각형

$n\leq100$ 개의 점이 랜덤으로 주어질 때, 점들의 일부를 선택해 둘레의 길이가 최대가 되는 단순다각형을 만드는 문제이다. 휴리스틱 문제로 문제 기준에 따라 점수가 결정된다. 처음에 한 점에서 시작해 가장 시계방향에 있는 점과 반시계방향에 있는 점을 번갈아 찍는 전략을 선택했다. 단순다각형을 보장하기 위해 가장 위쪽 점부터 아래쪽 점까지 왼쪽 convex hull을 만들고 나머지 점들을 번갈아 찍었는데, 이 전략이 120점 밖에 받지 못했다. (만점은 200점)

120점을 받고 4번으로 넘어가서 나중에 다시 돌아왔는데, random swap 등을 추가해도 120점을 넘지 못해서 결국 120점으로 마무리했다. 정해는 한 점을 잡고 polar sorting 한 후 그 순서대로 그냥 이으면 된다고 한다. 이 작업은 모든 점에 대해 수행한 후 최대를 출력하면 된다고. (가장 모서리에 있는 네 개의 점만 해도 만점이 나온다고 한다.)

**1시간 33분 Partially solved (120/200)**

## 4. 기지국

길이 $L$ 짜리 선분 위에 $n \leq 1000$ 개의 구간이 주어진다. 구간의 길이는 모두 $2r$ 로 동일하고, 구간의 중심이 항상 $[0,L]$ 에 속해있다. 이 때 $n$ 개의 구간들이 $[0,L]$ 을 모두 덮기 위해 이동해야 하는 거리 합의 최소를 구하는 문제이다.

일단 $n$ 의 크기가 작아서 dp나 flow를 염두에 두고 접근하였다. 구간이 겹쳐있는 곳을 밀거나 땡겨서 구간 사이의 빈 곳을 채워야 하는데, 문제는 그 사이에 있는 구간의 개수만큼 이동거리가 곱해진다는 것이다.

![image-1]({{ "/assets/img/image-20190801-1.png" | absolute_url }})

처음에는 dp를 시도했는데 구간이 좌우 양쪽으로 모두 움직일 수 있어서 $O(L)$이 들어가는 시간복잡도 외에는 dp식을 구하기가 어려웠다. dp가 막히고 나서 잠시 flow를 쓰는 풀이를 고민해봤는데, source에서 겹치는 길이만큼 flow를 흘려주고, 떨어진 길이만큼 sink로 flow를 흘려주면 될 것 같다는 생각을 했다. 여기까지 생각이 도달하고 나니 이후 모델링은 수월했다. 구간 개수만큼 이동거리가 곱해지는 것은 구간 사이사이 cost를 1로 주는 것으로 해결되었다.

![image-2]({{ "/assets/img/image-20190801-2.png" | absolute_url }})

SPFA를 사용하는 MCMF를 구현해서 코드를 짰다. 몇 번 수정한 뒤에도 계속 틀리길래 틀릴 곳이 없는데 왜 틀리지 하다가 x좌표를 sorting하지 않았다는 것을 깨달았다. input으로 주어지는 x좌표가 sorting 되어 있어서 sorting 해서 주는 줄 알았는데 문제를 천천히 다시 읽어보니 그런 말이 없었던 것이다... x좌표 sorting 해주는 코드 한 줄 추가하고 냈더니 AC를 받았다.

정해는 greedy하게 dp식을 잡는다고 들었다. 자세히는 모른다.

**2시간 41분 AC.**

## 5. 정육면체 재구성

대회 끝날 때쯤 문제만 읽었다. $n \leq 10^5$개의 점이 주어질 때 중심이 같은 두 정육면체를 찾아야 하는데, 두 정육면체 사이에 $n$ 개의 점이 모두 존재하며 두 정육면체의 크기(한 변의 길이) 차이가 최소가 되도록 하는 것이다. 3차원에서 어떻게 잘 2차원으로 줄이고 sorting과 segment tree를 적절히 섞어서 푼다고 한다.

<br>

# Result

4번 AC가 뜬 순간 수상은 하겠구나 싶었고, 남은 한 시간 동안 2번을 만점 받아야겠다고 생각했지만 2번 점수를 올리는 데 실패했다. 2번에서 삽질을 계속하다가 15분 정도 남기고 5번을 긁으러 갔는데 5번 긁는 것도 풀이가 잘 안 떠올라서 마지막에는 스코어보드 구경했다. 4번 만점자가 21명이어서 2번 점수가 낮은 내가 5등상을 수상할 줄 알았는데 (18등까지가 4등상), 새로 바뀐 2~5등상 수상 기준 때문에 앞에 사람이 빠지면서 4등상을 수상하게 되었다.

돌이켜보면 이번 대회는 딱 내 실력대로 봤다고 생각한다. 내가 약한 분야인 휴리스틱과 기하가 나온 2번은 굉장히 낮은 점수를 받았고, 평소에 자신 있었던 dp나 flow를 사용한 4번은 풀어냈다. 코드 구현도 아직 미숙한 점이 많아서 불필요한 WA를 많이 받았다. 좀 더 다양한 문제를 풀어보고, 빠르고 정확하게 구현하는 연습을 해야 할 필요성을 느꼈다. 내년 SCPC에서는 이런 단점들을 잘 보완해서 더 좋은 성적을 받았으면 좋겠다!
